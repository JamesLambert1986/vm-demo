{"version":3,"sources":["app/assets/scripts/modules/vmtests.js","app/assets/scripts/vmstrap-tests.js"],"names":["vmTests","body","errorTable","test","intro","window","integrationTestsIntro","console","log","Test","Total","Passes","Fails","Array","from","document","querySelectorAll","forEach","card","index","closest","btnLink","querySelector","textContent","length","push","deck","container","matches","Notes","tabs","title","strapline","entry","color","groupCollapsed","table","Passed","value","Failed","groupEnd","integrationTests","errorTableUtility","Type","element","replace","contextLevel","headingTable","heading","level","text","inOrder","Heading Level","In order","linksTable","link","url","getAttribute","Text","Title","imgTable","imgNoAltTable","image","alt","Alt","imgElem","src","xhr","XMLHttpRequest","open","onreadystatechange","imgW","imgH","imgW2","imgH2","imgScl","imgFSize2","imgBPP","cssColor","bppColor","scaleColor","bppError","scaleError","readyState","status","imgFSize","getResponseHeader","naturalWidth","naturalHeight","clientWidth","clientHeight","toFixed","Math","floor","Image","Dimensions","Scaled to","Scale","Filesize","Bytes per pixel","send","integrationTestsArr","displayComp","innerHTML","getElementById","addEventListener","isIE","navigator","userAgent","indexOf","appVersion","setTimeout","classList","contains","includes","location","host","lint"],"mappings":"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","file":"../vmstrap-tests.js","sourcesContent":["/** \n * Integration tests\n * @module vmTests \n */\n\n/**\n * Run tests\n * @param {HTMLElement} body Dom element, this doesn't have to be the body but it is recommended.\n */\nconst vmTests = (body) => {\n  \n  let errorTable = [];\n  let test = {};\n  const intro = \"These tests run against mark-up and content meant to test how a component or element has been integrated. Making sure that guidance setout in the design system is being followed.\";\n\n  window.integrationTestsIntro = intro;\n\n  console.log(\"%cVirgin Money Framework Tests\",\"color: #E10A0A; font-size: 24px; font-weight: bold; margin-top: 20px; margin-bottom: 10px;\");\n\n  console.log(\"%c\"+intro,\"font-size: 14px; margin-bottom: 20px;\");\n\n  console.log(\"%cKey\",\"font-size: 16px;font-weight:bold;\");\n  console.log('%c   %c' + 'Successfully implemented', 'background-color: green; margin-right: 10px', 'background-color: transparent');\n  console.log('%c   %c' + 'NOT implemented correctly', 'background-color: red; margin-right: 10px', 'background-color: transparent');\n  console.log('%c   %c' + 'N/A', 'background-color: grey; margin-right: 10px', 'background-color: transparent');\n  console.log('%c   %c' + 'Warning - No action needed', 'background-color: orange; margin-right: 10px', 'background-color: transparent');\n  console.log('%c ? %c' + 'Warning - Action needed', 'background-color: orange; margin-right: 10px', 'background-color: transparent');\n\n  // #region Card deck Footer test\n  test = {\n    'Test': 'Each card with in a card deck has a footer with some CTA text via a button link',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0\n  }\n\n  Array.from(document.querySelectorAll('.card-deck .card')).forEach((card, index) => {\n    \n    if(card.closest('.navbar') == null){\n        \n      let btnLink = card.querySelector('.btn-link');\n\n      if(btnLink != null  && btnLink.textContent.length)\n        test['Passes']++;\n      else \n        test['Fails']++;\n    }\n  });\n\n  test['Total'] = test['Passes'] + test['Fails'];\n  errorTable.push(test); \n  // #endregion\n\n  // #region Article deck background colour\n  test = {\n    'Test': 'Article Decks need to have a background colour applied',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0\n  }\n\n  Array.from(document.querySelectorAll('.article-deck')).forEach((deck, index) => {\n    \n    let container = deck.closest('.container');\n\n    if (container != null && container.matches('[class*=\"bg-\"]'))\n      test['Passes']++;\n    else \n      test['Fails']++;\n  });\n\n  test['Total'] = test['Passes'] + test['Fails'];\n  errorTable.push(test); \n  // #endregion\n\n  // #region Tabs Carousel title test\n  test = {\n    'Test': 'Tabs Carousel has a h2 title with a display-4 class. It should always have a strapline next to it also.',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0,\n    'Notes': 'The site nav contains cards without a footer by design.' \n  }\n\n  Array.from(document.querySelectorAll('.tabs__container--carousel')).forEach((tabs, index) => {\n    \n    let title = tabs.querySelector('h2.display-4:first-child');\n    let strapline = tabs.querySelector('h2.display-4:first-child + .strapline');\n    \n    if(title != null && strapline != null)\n      test['Passes']++;\n    else\n      test['Fails']++\n  });\n\n  test['Total'] = test['Passes'] + test['Fails'];\n  errorTable.push(test); \n  // #endregion\n\n  // #region Split Container tests\n  test = {\n    'Test': 'Split Containers can only have multiple of two columns. So either 2, 4, 6 and so on.',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0,\n    'Notes': '' \n  }\n\n  Array.from(document.querySelectorAll('.container.container--split')).forEach((container, index) => {\n\n    if(container.querySelectorAll(':scope > .row > [class*=\"col\"]').length % 2 === 0)\n      test['Passes']++;\n    else \n      test['Fails']++;\n  });\n  test['Total'] = test['Passes'] + test['Fails'];\n  errorTable.push(test); \n  // #endregion\n\n  // #region Statement Container tests\n  test = {\n    'Test': 'Statement Containers with only one paragraph or text element should have the class of .h6',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0,\n    'Notes': '' \n  }\n\n  Array.from(document.querySelectorAll('.container.container--statement')).forEach((container, index) => {\n    if(container.querySelectorAll(':scope > *').length == 1 && container.querySelectorAll(':scope > .h6:first-child').length == 1)\n      test['Passes']++;\n    else if(container.querySelectorAll(':scope > *').length == 1)\n      test['Fails']++;\n  });\n  test['Total'] = test['Passes'] + test['Fails'];\n  errorTable.push(test); \n  // #endregion\n\n  // #region CTA Container tests\n  test = {\n    'Test': 'CTA Containers title should always have the class of .h1',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0,\n    'Notes': '' \n  }\n\n  Array.from(document.querySelectorAll('.container.container--cta')).forEach((container, index) => {\n\n    if(container.querySelectorAll('h2.h1:first-child').length == 1)\n      test['Passes']++;\n    else \n      test['Fails']++;\n  });\n  test['Total'] = test['Passes'] + test['Fails'];\n  errorTable.push(test); \n  // #endregion\n\n  // Print Implementation tests\n  console.log(\"%cImplementation Tests\",\"font-size: 16px;font-weight:bold; margin-top: 20px;\");\n  errorTable.forEach(function(entry) {\n    let color = 'green';\n\n    if(entry['Total'] === 0){\n      color = 'grey';\n    }\n    else if(entry['Fails'] != 0){\n      color = 'red';\n    }\n\n    if(entry['Type'] == 'warning'){\n      color = 'orange';\n    }\n\n    console.groupCollapsed('%c   %c' + entry.Test, 'background-color: ' + color + '; margin-right: 10px', 'background-color: transparent');\n    console.table({\n        Passed:   {value: entry['Passes']},\n        Failed: {value: entry['Fails']},\n        Total: {value: entry['Total']}\n    });\n\n    if(entry['Notes'] != ''){\n      console.log(entry['Notes']);\n    }\n\n    console.groupEnd();\n  });\n\n\n  window.integrationTests = errorTable;    \n\n  // Resest table\n  var errorTableUtility = [];\n\n  // #region Padding classes \n  test = {\n    'Test': 'There are XX padding classes being used on this page',\n    'Type': 'warning',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0,\n    'Notes': '' \n  }\n\n  Array.from(document.querySelectorAll('[class*=\"p-\"],[class*=\"pt-\"],[class*=\"pb-\"],[class*=\"pl-\"],[class*=\"pr-\"],[class*=\"px-\"],[class*=\"py-\"]')).forEach((element, index) => {\n\n    test['Total']++;\n  });\n\n  test['Test'] = test['Test'].replace('XX',test['Total']);\n  errorTableUtility.push(test); \n  // #endregion\n\n  // #region Margin classes \n  test = {\n    'Test': 'There are XX margin classes being used on this page',\n    'Type': 'warning',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0,\n    'Notes': '' \n  }\n\n  Array.from(document.querySelectorAll('[class*=\"m-\"],[class*=\"mt-\"],[class*=\"mb-\"],[class*=\"ml-\"],[class*=\"mr-\"],[class*=\"mx-\"],[class*=\"my-\"]')).forEach((element, index) => {\n\n    test['Total']++;\n  });\n\n  test['Test'] = test['Test'].replace('XX',test['Total']);\n  errorTableUtility.push(test); \n  // #endregion\n\n  // #region Text modifier classes\n  test = {\n    'Test': 'There are XX text modifier classes being used on this page',\n    'Type': 'warning',\n    'Total': 0,\n    'Passes': 0,\n    'Fails': 0,\n    'Notes': '' \n  }\n  Array.from(document.querySelectorAll('[class*=\"text-\"]')).forEach((element, index) => {\n\n    test['Total']++;\n  });\n\n  test['Test'] = test['Test'].replace('XX',test['Total']);\n  errorTableUtility.push(test); \n  // #endregion\n\n\n  // Print the utility classes tests\n  console.log(\"%cUtility classes\",\"font-size: 16px;font-weight:bold;\");\n\n  console.log(\"The use of certain utility classes is necessary at times but the over use of these classes will lead to design/layout inconsistencies.\");\n\n  errorTableUtility.forEach(function(entry) {\n    let color = 'green';\n\n    if(entry['Total'] === 0)\n      color = 'grey';\n    else if(entry['Fails'] != 0)\n      color = 'red';\n\n    if(entry['Type'] == 'warning')\n      color = 'orange';\n\n    console.groupCollapsed('%c   %c' + entry.Test, 'background-color: ' + color + '; margin-right: 10px', 'background-color: transparent');\n    console.table({\n        Total: {value: entry['Total']}\n    });\n\n    if(entry['Notes'] != ''){\n      console.log(entry['Notes']);\n    }\n\n    console.groupEnd();\n  });\n\n  \n  // #region Headings out of context tests\n  console.log(\"%cAccessibility and Best practice Tests\",\"font-size: 16px;font-weight:bold;\");\n\n  let color = 'green';\n  let contextLevel = 1;\n  let headingTable = {};\n\n  Array.from(document.querySelectorAll('h1,h2,h3,h4,h5,h6')).forEach((heading, index) => {\n    \n    let level = 1;\n    let text = heading.textContent;\n\n    if(heading.matches(\"h2\"))\n      level = 2;\n    else if(heading.matches(\"h3\"))\n      level = 3;\n    else if(heading.matches(\"h4\"))\n      level = 4;\n    else if(heading.matches(\"h5\"))\n      level = 5;\n    else if(heading.matches(\"h6\"))\n      level = 6;\n      \n\n    let inOrder = (level - contextLevel) <= 1;\n\n    if(index == 0 && level != 1){\n      inOrder = false;\n    }\n\n    let test = {\n      \"Heading Level\": level,\n      \"In order\": inOrder\n    }\n\n    if (inOrder){\n\n      contextLevel = level;\n    }\n    else {\n      color = 'red';\n    }\n\n    headingTable[text] = test;\n  });\n\n  console.groupCollapsed('%c   %c' + 'Headings are in the correct order', 'background-color: ' + color + '; margin-right: 10px', 'background-color: transparent');\n  console.table(headingTable);\n  console.groupEnd();\n\n  console.groupCollapsed('%c ? %c' + 'Do all of the headings make sense out of context and do they introduce the content that follows?', 'background-color: ' + 'orange' + '; margin-right: 10px', 'background-color: transparent');\n  console.log(\"You should be able to read the below table and get an understanding of what the page content consists of. The titles should make sense when read in order and child titles should be relevant to the parent title.\");\n  console.table(headingTable);\n  console.groupEnd();\n  // #endregion\n\n  // #region Links out of context tests\n  let linksTable = {};\n  Array.from(document.querySelectorAll('a')).forEach((link, index) => {\n    \n    var url = link.getAttribute('href');\n    var text = link.textContent;\n    var title = link.getAttribute('title');\n\n    let test = {\n      \"Text\": text,\n      \"Title\": title\n    }\n\n    linksTable[url] = test;\n  });\n\n  console.groupCollapsed('%c ? %c' + 'Do all of the links make sense out of context and do they describe the page/section that it links to?', 'background-color: ' + 'orange' + '; margin-right: 10px', 'background-color: transparent');\n  console.table(linksTable);\n  console.groupEnd();\n  // #endregion\n\n\n  // #region Image alt tags out of context tests\n  let imgTable = {};\n  let imgNoAltTable = {};\n\n  Array.from(document.querySelectorAll('img[alt]')).forEach((image, index) => {\n    \n    var url = image.getAttribute('src');\n    var alt = image.getAttribute('alt');\n\n    if(alt != \"\"){\n\n      let test = {\n        \"Alt\": alt\n      }\n\n      imgTable[url] = test;\n    \n    }\n    else {\n\n      var url = image.getAttribute('src');\n\n      let test = {};\n\n      imgNoAltTable[url] = test;\n    }\n    \n  });\n\n  console.groupCollapsed('%c ? %c' + 'Do all of the images with an alt tag make sense out of context and describes the image appropriately?', 'background-color: ' + 'orange' + '; margin-right: 10px', 'background-color: transparent');\n  console.table(imgTable);\n  console.log('%cImages with an empty alt tag:', 'font-weight: bold;');\n  console.table(imgNoAltTable);\n  console.groupEnd();\n  // #endregion\n\n  // #region Keyboard user messages\n  console.groupCollapsed('%c ? %c' + 'Can you navigation the page links by tabbing through the page?', 'background-color: ' + 'orange' + '; margin-right: 10px', 'background-color: transparent');\n  console.log('Are all of the links, input fields and buttons accessible through using the keyboard only?');\n  console.groupEnd();\n  // #endregion\n\n\n\n  console.log(\"%cLighthouse\",\"font-size: 16px;font-weight:bold;\");\n\n  // #region Lighthouse\n  console.groupCollapsed('%c ? %c' + 'Have you ran a lighthouse report on this page', 'background-color: ' + 'orange' + '; margin-right: 10px', 'background-color: transparent');\n  console.log('If you are in a modern version of chrome you can a lighthouse report by opening the lighthouse window within the devtools. This should appear as a tab link above.');\n  console.log('This report will give you more detail about the above the tests aswell as extra tests. ');\n  console.groupEnd();\n  // #endregion\n\n  console.log(\"%cImage sizes\",\"font-size: 16px;font-weight:bold;\");\n  console.log(\"The below tests work from the current screen size, so if you have your screen at a mobile viewport the scaling and sizes of images will reflect that. It is worth running the image tests in both mobile and desktop views. Simply change the screen size and refresh the page.\");\n\n  Array.from(document.querySelectorAll('img')).forEach((imgElem, index) => {\n\n    if(!imgElem.matches(\"[src*='http']\") && !imgElem.matches(\"[src$='.svg']\")){\n    \n      let src = imgElem.getAttribute('src');\n\n      var xhr = new XMLHttpRequest();\n      xhr.open('HEAD', src, true);\n      xhr.onreadystatechange = function(){\n        if (xhr.readyState == 4) {\n          if (xhr.status == 200){\n            var imgFSize = xhr.getResponseHeader('Content-Length');\n            if (imgFSize > 1024){  //ignore images under 1Kb\n              var imgW = imgElem.naturalWidth;   \n              var imgH = imgElem.naturalHeight;\n              var imgW2 = imgElem.clientWidth;   \n              var imgH2 = imgElem.clientHeight;\n              var imgScl = (imgW2/imgW).toFixed(2) == \"0.00\" ? \"Hidden\" : (imgW2/imgW).toFixed(2);\n              var imgFSize2 = Math.floor(imgFSize/1024);\n              var imgBPP = (imgFSize/(imgW*imgH)).toFixed(2);\n              var cssColor = \"green\";\n              var bppColor = \"green\";\n              var scaleColor = \"green\";\n\n              var bppError = \"\";\n              var scaleError = \"\";\n\n\n              if (imgBPP > 0.5){\n                cssColor = \"red\";\n                bppColor = \"red\";\n                bppError = \"The image has a VERY large \\'Bytes per pixel\\' score, trying optimising the image using https://tinypng.com/.\";\n              }\n              else if (imgBPP > 0.2){\n                cssColor = \"orange\";\n                bppColor = \"orange\";\n                bppError = \"The image has a large \\'Bytes per pixel\\' score, trying optimising the image using https://tinypng.com/.\";\n              }\n\n              if (imgScl > 1.2){\n                cssColor = \"red\";\n                scaleColor = \"red\";\n                scaleError = \"The image size is smaller than the size shown on screen this may cause the image to appear blurry and low quality.\";\n              }\n              else if (imgScl < 0.5){\n                cssColor = \"red\";\n                scaleColor = \"red\";\n                scaleError = \"The image size is VERY large compared to the size shown on screen, this means unnecessary kb's are being downloaded. Try resizing the image in photoshop or other image editing software.\";\n              }\n              else if (imgScl < 0.8){\n                cssColor = \"orange\";\n                scaleColor = \"orange\";\n                scaleError = \"The image size is large compared to the size shown on screen, this means unnecessary kb's are being downloaded. Try resizing the image in photoshop or other image editing software.\";\n              }\n              \n              console.groupCollapsed(\"%c     %c \"+imgElem.src,'background: url('+imgElem.src+'); border: 3px solid '+cssColor+'; line-height: 30px; width: 30px; background-size: cover;', 'background-color: transparent');\n\n              if(bppError != \"\"){\n                console.log('%c   %c'+bppError , 'background-color: ' + bppColor + '; margin-right: 10px', 'background-color: transparent');\n              }\n              if(scaleError != \"\"){\n                console.log('%c   %c'+scaleError , 'background-color: ' + scaleColor + '; margin-right: 10px', 'background-color: transparent');\n              }\n\n              console.table({\n                Image:   {\"Dimensions\": imgW + \"x\" + imgH, \"Scaled to\":  imgW2 + \"x\" + imgH2, \"Scale\": imgScl, \"Filesize\": imgFSize2 + \"Kb\", \"Bytes per pixel\": imgBPP}\n              });\n\n              console.groupEnd();\n            }\n          }\n          else {\n            console.log('%c   %c'+imgElem.src+' not loaded' , 'background-color: red; margin-right: 10px', 'background-color: transparent');\n          }\n        }\n      };\n      xhr.send(null);\n\n\n    }\n  });\n\n  // Add to dom here\n  let integrationTestsArr = [];\n  if(typeof window.integrationTests != \"undefined\"){\n\n    window.integrationTests.forEach(function(entry) {\n      if(entry['Total'] != 0 && entry['Type'] != \"warning\" ){\n        integrationTestsArr.push(entry['Test']); \n      }\n    });\n  }\n\n  if (integrationTestsArr.length != 0) {\n\n    let displayComp = document.querySelector('#vmtests-display');\n\n    if(displayComp != null){\n\n      displayComp.innerHTML = `<div class=\"container\">\n      <h2>Integration notes</h2>\n      <ul id=\"integrationTests\"></ul>\n      </div>`;\n    \n      let integrationTests = document.getElementById('integrationTests');\n    \n      if(integrationTests != null){\n\n        integrationTestsArr.forEach(function(test) {\n\n          integrationTests.innerHTML += '<li>'+test+'</li>';\n\n        });\n      }\n    }\n  }\n\n  return null\n}\n\nexport default vmTests;","import vmTests from './modules/vmtests'\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n  var isIE = false;\n\n  if(navigator.userAgent.indexOf('MSIE')!==-1 || navigator.appVersion.indexOf('Trident/') > 0)\n    isIE = true\n\n  if (!isIE){\n\n    window.vmTests = function(){\n\n      vmTests();\n\n    }\n\n    setTimeout(function(){\n      if(!document.body.classList.contains('ie')){ // The below code does not work in IE11\n        var liveURLs = [\"www.virginmoneyukplc.com\",\"uk.virginmoney.com\",\"uk.virginmoneygiving.com\"]\n        if(!liveURLs.includes(window.location.host) || navigator.userAgent.indexOf(\"Chrome-Lighthouse\") > -1){\n          vmTests();\n        }\n      }\n    }, 1000);\n\n    // #region Apply some lintint CSS\n    window.lint = function(){\n\n      document.body.innerHTML += `\n      <style type=\"text/css\">\n      html:not([lang]):after,  \n      html[lang=\"\"]:after {\n        content: \"No language tag\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 999999;\n        background: red!important;\n      } \n      \n      meta[charset]:not([charset=\"UTF-8\"]):after {\n        content: \"Incorrect character set defined\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 999999;\n        background: red!important;\n      } \n      \n      meta[name=\"viewport\"][content*=\"user-scalable=no\"]:after,  \n      meta[name=\"viewport\"][content*=\"maximum-scale\"]:after,  \n      meta[name=\"viewport\"][content*=\"minimum-scale\"]:after {\n        content: \"Unaccessible viewport attributes\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 999999;\n        background: red!important;\n      }  \n      \n      a:not([href]),\n      a[href=\"#\"],  \n      a[href=\"\"],  \n      a[href*=\"javascript:void(0)\"],\n      button:empty,  \n      a:empty {\n        content: \"lint\";\n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }  \n      \n      img:not([alt]) { \n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }  \n      \n      input:not([id]),  \n      select:not([id]),  \n      textarea:not([id]) { \n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }\n      \n      label:not([for]) {\n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }  \n      </style>\n      `;\n      \n      return \"Lintint CSS added\";\n    }\n    // #endregion\n  }\n});"]}