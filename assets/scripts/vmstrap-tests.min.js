!function(e){("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define("vmstrapTests",e):e()}(function(){"use strict";function o(e){var o=[],n={},t="These tests run against mark-up and content meant to test how a component or element has been integrated. Making sure that guidance setout in the design system is being followed.";window.integrationTestsIntro=t,console.log("%cVirgin Money Framework Tests","color: #E10A0A; font-size: 24px; font-weight: bold; margin-top: 20px; margin-bottom: 10px;"),console.log("%c"+t,"font-size: 14px; margin-bottom: 20px;"),console.log("%cKey","font-size: 16px;font-weight:bold;"),console.log("%c   %cSuccessfully implemented","background-color: green; margin-right: 10px","background-color: transparent"),console.log("%c   %cNOT implemented correctly","background-color: red; margin-right: 10px","background-color: transparent"),console.log("%c   %cN/A","background-color: grey; margin-right: 10px","background-color: transparent"),console.log("%c   %cWarning - No action needed","background-color: orange; margin-right: 10px","background-color: transparent"),console.log("%c ? %cWarning - Action needed","background-color: orange; margin-right: 10px","background-color: transparent"),n={Test:"Each card with in a card deck has a footer with some CTA text via a button link",Total:0,Passes:0,Fails:0},Array.from(document.querySelectorAll(".card-deck .card")).forEach(function(e,o){null==e.closest(".navbar")&&(null!=(e=e.querySelector(".btn-link"))&&e.textContent.length?n.Passes++:n.Fails++)}),n.Total=n.Passes+n.Fails,o.push(n),n={Test:"Article Decks need to have a background colour applied",Total:0,Passes:0,Fails:0},Array.from(document.querySelectorAll(".article-deck")).forEach(function(e,o){e=e.closest(".container");null!=e&&e.matches('[class*="bg-"]')?n.Passes++:n.Fails++}),n.Total=n.Passes+n.Fails,o.push(n),n={Test:"Tabs Carousel has a h2 title with a display-4 class. It should always have a strapline next to it also.",Total:0,Passes:0,Fails:0,Notes:"The site nav contains cards without a footer by design."},Array.from(document.querySelectorAll(".tabs__container--carousel")).forEach(function(e,o){var t=e.querySelector("h2.display-4:first-child"),e=e.querySelector("h2.display-4:first-child + .strapline");null!=t&&null!=e?n.Passes++:n.Fails++}),n.Total=n.Passes+n.Fails,o.push(n),n={Test:"Split Containers can only have multiple of two columns. So either 2, 4, 6 and so on.",Total:0,Passes:0,Fails:0,Notes:""},Array.from(document.querySelectorAll(".container.container--split")).forEach(function(e,o){e.querySelectorAll(':scope > .row > [class*="col"]').length%2==0?n.Passes++:n.Fails++}),n.Total=n.Passes+n.Fails,o.push(n),n={Test:"Statement Containers with only one paragraph or text element should have the class of .h6",Total:0,Passes:0,Fails:0,Notes:""},Array.from(document.querySelectorAll(".container.container--statement")).forEach(function(e,o){1==e.querySelectorAll(":scope > *").length&&1==e.querySelectorAll(":scope > .h6:first-child").length?n.Passes++:1==e.querySelectorAll(":scope > *").length&&n.Fails++}),n.Total=n.Passes+n.Fails,o.push(n),n={Test:"CTA Containers title should always have the class of .h1",Total:0,Passes:0,Fails:0,Notes:""},Array.from(document.querySelectorAll(".container.container--cta")).forEach(function(e,o){1==e.querySelectorAll("h2.h1:first-child").length?n.Passes++:n.Fails++}),n.Total=n.Passes+n.Fails,o.push(n),console.log("%cImplementation Tests","font-size: 16px;font-weight:bold; margin-top: 20px;"),o.forEach(function(e){var o="green";0===e.Total?o="grey":0!=e.Fails&&(o="red"),"warning"==e.Type&&(o="orange"),console.groupCollapsed("%c   %c"+e.Test,"background-color: "+o+"; margin-right: 10px","background-color: transparent"),console.table({Passed:{value:e.Passes},Failed:{value:e.Fails},Total:{value:e.Total}}),""!=e.Notes&&console.log(e.Notes),console.groupEnd()}),window.integrationTests=o,o=[],n={Test:"There are XX padding classes being used on this page",Type:"warning",Total:0,Passes:0,Fails:0,Notes:""},Array.from(document.querySelectorAll('[class*="p-"],[class*="pt-"],[class*="pb-"],[class*="pl-"],[class*="pr-"],[class*="px-"],[class*="py-"]')).forEach(function(e,o){n.Total++}),n.Test=n.Test.replace("XX",n.Total),o.push(n),n={Test:"There are XX margin classes being used on this page",Type:"warning",Total:0,Passes:0,Fails:0,Notes:""},Array.from(document.querySelectorAll('[class*="m-"],[class*="mt-"],[class*="mb-"],[class*="ml-"],[class*="mr-"],[class*="mx-"],[class*="my-"]')).forEach(function(e,o){n.Total++}),n.Test=n.Test.replace("XX",n.Total),o.push(n),n={Test:"There are XX text modifier classes being used on this page",Type:"warning",Total:0,Passes:0,Fails:0,Notes:""},Array.from(document.querySelectorAll('[class*="text-"]')).forEach(function(e,o){n.Total++}),n.Test=n.Test.replace("XX",n.Total),o.push(n),console.log("%cUtility classes","font-size: 16px;font-weight:bold;"),console.log("The use of certain utility classes is necessary at times but the over use of these classes will lead to design/layout inconsistencies."),o.forEach(function(e){var o="green";0===e.Total?o="grey":0!=e.Fails&&(o="red"),"warning"==e.Type&&(o="orange"),console.groupCollapsed("%c   %c"+e.Test,"background-color: "+o+"; margin-right: 10px","background-color: transparent"),console.table({Total:{value:e.Total}}),""!=e.Notes&&console.log(e.Notes),console.groupEnd()}),console.log("%cAccessibility and Best practice Tests","font-size: 16px;font-weight:bold;");var a="green",s=1,r={};Array.from(document.querySelectorAll("h1,h2,h3,h4,h5,h6")).forEach(function(e,o){var t=1,n=e.textContent;e.matches("h2")?t=2:e.matches("h3")?t=3:e.matches("h4")?t=4:e.matches("h5")?t=5:e.matches("h6")&&(t=6);e=t-s<=1,o={"Heading Level":t,"In order":e=0==o&&1!=t?!1:e};e?s=t:a="red",r[n]=o}),console.groupCollapsed("%c   %cHeadings are in the correct order","background-color: "+a+"; margin-right: 10px","background-color: transparent"),console.table(r),console.groupEnd(),console.groupCollapsed("%c ? %cDo all of the headings make sense out of context and do they introduce the content that follows?","background-color: orange; margin-right: 10px","background-color: transparent"),console.log("You should be able to read the below table and get an understanding of what the page content consists of. The titles should make sense when read in order and child titles should be relevant to the parent title."),console.table(r),console.groupEnd();var l={};Array.from(document.querySelectorAll("a")).forEach(function(e,o){var t=e.getAttribute("href"),e={Text:e.textContent,Title:e.getAttribute("title")};l[t]=e}),console.groupCollapsed("%c ? %cDo all of the links make sense out of context and do they describe the page/section that it links to?","background-color: orange; margin-right: 10px","background-color: transparent"),console.table(l),console.groupEnd();var i={},c={};Array.from(document.querySelectorAll("img[alt]")).forEach(function(e,o){var t=e.getAttribute("src"),n=e.getAttribute("alt");""!=n?(n={Alt:n},i[t]=n):(t=e.getAttribute("src"),c[t]={})}),console.groupCollapsed("%c ? %cDo all of the images with an alt tag make sense out of context and describes the image appropriately?","background-color: orange; margin-right: 10px","background-color: transparent"),console.table(i),console.log("%cImages with an empty alt tag:","font-weight: bold;"),console.table(c),console.groupEnd(),console.groupCollapsed("%c ? %cCan you navigation the page links by tabbing through the page?","background-color: orange; margin-right: 10px","background-color: transparent"),console.log("Are all of the links, input fields and buttons accessible through using the keyboard only?"),console.groupEnd(),console.log("%cLighthouse","font-size: 16px;font-weight:bold;"),console.groupCollapsed("%c ? %cHave you ran a lighthouse report on this page","background-color: orange; margin-right: 10px","background-color: transparent"),console.log("If you are in a modern version of chrome you can a lighthouse report by opening the lighthouse window within the devtools. This should appear as a tab link above."),console.log("This report will give you more detail about the above the tests aswell as extra tests. "),console.groupEnd(),console.log("%cImage sizes","font-size: 16px;font-weight:bold;"),console.log("The below tests work from the current screen size, so if you have your screen at a mobile viewport the scaling and sizes of images will reflect that. It is worth running the image tests in both mobile and desktop views. Simply change the screen size and refresh the page."),Array.from(document.querySelectorAll("img")).forEach(function(u,e){var o,h;u.matches("[src*='http']")||u.matches("[src$='.svg']")||(o=u.getAttribute("src"),(h=new XMLHttpRequest).open("HEAD",o,!0),h.onreadystatechange=function(){var e,o,t,n,a,s,r,l,i,c,g,d;4==h.readyState&&(200==h.status?1024<(r=h.getResponseHeader("Content-Length"))&&(e=u.naturalWidth,o=u.naturalHeight,t=u.clientWidth,n=u.clientHeight,a="0.00"==(t/e).toFixed(2)?"Hidden":(t/e).toFixed(2),s=Math.floor(r/1024),c=i=l="green",d=g="",.5<(r=(r/(e*o)).toFixed(2))?(i=l="red",g="The image has a VERY large 'Bytes per pixel' score, trying optimising the image using https://tinypng.com/."):.2<r&&(i=l="orange",g="The image has a large 'Bytes per pixel' score, trying optimising the image using https://tinypng.com/."),1.2<a?(c=l="red",d="The image size is smaller than the size shown on screen this may cause the image to appear blurry and low quality."):a<.5?(c=l="red",d="The image size is VERY large compared to the size shown on screen, this means unnecessary kb's are being downloaded. Try resizing the image in photoshop or other image editing software."):a<.8&&(c=l="orange",d="The image size is large compared to the size shown on screen, this means unnecessary kb's are being downloaded. Try resizing the image in photoshop or other image editing software."),console.groupCollapsed("%c     %c "+u.src,"background: url("+u.src+"); border: 3px solid "+l+"; line-height: 30px; width: 30px; background-size: cover;","background-color: transparent"),""!=g&&console.log("%c   %c"+g,"background-color: "+i+"; margin-right: 10px","background-color: transparent"),""!=d&&console.log("%c   %c"+d,"background-color: "+c+"; margin-right: 10px","background-color: transparent"),console.table({Image:{Dimensions:e+"x"+o,"Scaled to":t+"x"+n,Scale:a,Filesize:s+"Kb","Bytes per pixel":r}}),console.groupEnd()):console.log("%c   %c"+u.src+" not loaded","background-color: red; margin-right: 10px","background-color: transparent"))},h.send(null))});var g,d=[];return void 0!==window.integrationTests&&window.integrationTests.forEach(function(e){0!=e.Total&&"warning"!=e.Type&&d.push(e.Test)}),0==d.length||null!=(o=document.querySelector("#vmtests-display"))&&(o.innerHTML='<div class="container">\n      <h2>Integration notes</h2>\n      <ul id="integrationTests"></ul>\n      </div>',null!=(g=document.getElementById("integrationTests"))&&d.forEach(function(e){g.innerHTML+="<li>"+e+"</li>"})),0}document.addEventListener("DOMContentLoaded",function(){var e=!1;(e=-1!==navigator.userAgent.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/")?!0:e)||(window.vmTests=function(){o()},setTimeout(function(){document.body.classList.contains("ie")||(!["www.virginmoneyukplc.com","uk.virginmoney.com","uk.virginmoneygiving.com"].includes(window.location.host)||-1<navigator.userAgent.indexOf("Chrome-Lighthouse"))&&o()},1e3),window.lint=function(){return document.body.innerHTML+='\n      <style type="text/css">\n      html:not([lang]):after,  \n      html[lang=""]:after {\n        content: "No language tag";\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 999999;\n        background: red!important;\n      } \n      \n      meta[charset]:not([charset="UTF-8"]):after {\n        content: "Incorrect character set defined";\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 999999;\n        background: red!important;\n      } \n      \n      meta[name="viewport"][content*="user-scalable=no"]:after,  \n      meta[name="viewport"][content*="maximum-scale"]:after,  \n      meta[name="viewport"][content*="minimum-scale"]:after {\n        content: "Unaccessible viewport attributes";\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 999999;\n        background: red!important;\n      }  \n      \n      a:not([href]),\n      a[href="#"],  \n      a[href=""],  \n      a[href*="javascript:void(0)"],\n      button:empty,  \n      a:empty {\n        content: "lint";\n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }  \n      \n      img:not([alt]) { \n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }  \n      \n      input:not([id]),  \n      select:not([id]),  \n      textarea:not([id]) { \n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }\n      \n      label:not([for]) {\n        outline: 3px dashed red!important;\n        outline-offset: -3px!important;\n      }  \n      </style>\n      ',"Lintint CSS added"})})});
//# sourceMappingURL=maps/vmstrap-tests.js.map
